(window.siqcwJsonp=window.siqcwJsonp||[]).push([["BotWidget"],{"0358":function(e,t,i){"use strict";i("6933")},"0ebf":function(e,t,i){},"2ee0":function(e,t,i){"use strict";i("f9d6")},"31b4":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("fa7d");const o={data:()=>({}),methods:{formattedTagOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length&&"string"==typeof e[0]){let t=[];return e.forEach((e=>t.push({id:Object(s.a)(),text:e}))),t}return e},getFormattedSlots(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return Object.keys(e).forEach((i=>{t.push({id:i,list:{...e[i]}})})),t}}}},"464c":function(e,t,i){},"5bf8":function(e,t,i){"use strict";i("464c")},6933:function(e,t,i){},7404:function(e,t,i){},"86f5":function(e,t,i){"use strict";i.r(t);var s=i("7456"),o=i("7075"),a={name:"ConversationHandOff",props:{config:{type:Object,required:!0}},data:()=>({isTransferring:!1}),inject:["dispatchAction","getChatDetail"],methods:{transferChat(){this.isTransferring=!0;let e=this.getChatDetail();this.dispatchAction("transferChat",{departmentId:e.departmentId}).catch((t=>{this.isTransferring=!1,6e3===t.error.code&&(Object(s.a)(e.chId),this.$set(e,"staticInfoMessage",!0),this.$set(e,"isOfflineTransfer",!0))}))}},components:{ConversationConsent:o.a}},n=a,l=i("2877"),r=Object(l.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isTransferring?e._e():i("ConversationConsent",{attrs:{title:e.config.text,consentCta:e.config.ack,onCtaClick:e.transferChat,"data-zsqa":"bot_handoff_section"}})}),[],!1,null,null,null);t.default=r.exports},aa72:function(e,t,i){"use strict";i.r(t);var s=i("392d"),o=i("c153"),a=i("00a1"),n=i("4b5f"),l=i("fc70"),r=i("b5f5");const d=()=>i.e("ImagePreview").then(i.bind(null,"ff08"));var c={name:"WidgetLayout",props:{preTitle:{type:String,default:""},title:{type:String,default:""},desc:{type:String,default:""},subDesc:{type:String,default:""},hasSubmitBtn:{type:Boolean,default:!1},onSubmitHandler:{type:Function,default:()=>{}},btnProps:{type:Object,default:()=>{}},titleClass:{type:String,default:""},descClass:{type:String,default:""},isActive:{type:Boolean,default:!1},imageProps:{type:Object,default:()=>({})},chatId:{type:String,default:""},comp:Function,compProps:{type:Object,default:()=>({})}},data(){var e;let t=this,i={text:this.$doI18N("siq.submit"),className:"mT10 theme-clr",clickHandler:t.onSubmitHandler};return{submitBtnProps:null!==(e=t.btnProps)&&void 0!==e&&e.text?t.btnProps:i,dynProps:{}}},provide(){return{updateHeaderComp:this.updateHeaderComp}},methods:{updateHeaderComp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dynProps=e},openImagePreview(e){this.$showDialog({url:e},d)},imageClickHandler(){!r.b&&this.openImagePreview(this.imageProps.imgUrl)}},components:{ButtonComponent:o.a,Icon:a.a,ImageComponent:n.a,ConversationTextMessage:l.a}},p=c,u=(i("f365"),i("5bf8"),i("2877")),m=Object(u.a)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"widget-layout h100 flex fdirection"},[e.preTitle?i("conversation-text-message",{staticClass:"widget-container",class:e.titleClass,attrs:{message:e.preTitle,isEdited:!1,isVisitorMsg:!1,className:e.desc?"fw600 flexG":""}}):e._e(),e.imageProps.imgUrl?i("image-component",{attrs:{imgSrc:e.imageProps.imgUrl,dataSrc:e.imageProps.dataSrc,type:e.imageProps.type,clickHandler:e.imageClickHandler}}):e._e(),i("div",{staticClass:"widget-container"},[i(e.dynProps.comp,e._b({tag:"component"},"component",e.dynProps.props,!1)),e.title?i("conversation-text-message",{class:e.titleClass,attrs:{message:e.title,isEdited:!1,isVisitorMsg:!1,className:e.desc?"fw600 flexG":"",comp:e.comp,compProps:e.compProps},scopedSlots:e._u([{key:"custom",fn:function(){return[e.desc?i("div",{staticClass:"fw600 clrG"},[e._v(e._s(e.desc))]):e._e()]},proxy:!0}],null,!1,2458865739)}):e._e(),e.subDesc?i("div",{directives:[{name:"title",rawName:"v-title.isElips",value:e.subDesc,expression:"subDesc",modifiers:{isElips:!0}}],class:e.descClass},[e._v(e._s(e.subDesc))]):e._e(),e._t("component"),e.hasSubmitBtn&&e.isActive?i("div",{staticClass:"flexC justifyE theme-blue-clr"},[i("button-component",e._b({directives:[{name:"a11y",rawName:"v-a11y:themeclr",arg:"themeclr"}],attrs:{className:"font14"},scopedSlots:e._u([{key:"post-slot",fn:function(){return[i("icon",{staticClass:"siqico-rarrow mL5 btn-right-icon"})]},proxy:!0}],null,!1,3991966171)},"button-component",e.submitBtnProps,!1))],1):e._e()],2)],1)}),[],!1,null,"6e28f8d0",null),g=m.exports,h=(i("ac6a"),i("2b0e")),f=i("2f62"),v=i("0644"),b=i.n(v),y=i("31b4"),C=i("2e16");var w=i("8db4");const P=()=>i.e("CheckoutAction").then(i.bind(null,"bcae")),_=()=>i.e("InputWidget").then(i.bind(null,"006c"));let T=h.a.prototype.$doI18N;const D={layoutProps:{wrapperClass:"widget-card",titleClass:"widget-card-title"}},S={layoutProps:{hasSubmitBtn:!0,wrapperClass:"widget-card input-widget"}},k={placeHolder:T("msg.choose")},W=[{id:"calendar",component:()=>Promise.all([i.e("BookingsDialog~CalendarDialog~CalendarWidget~DateTimeSlotsWidget~TimeSlotsWidget~ZohoBookingsWidget"),i.e("BookingsDialog~CalendarDialog~CalendarWidget"),i.e("CalendarDialog"),i.e("CalendarWidget")]).then(i.bind(null,"3e28")),props:{placeHolder:T("siqcw.inputfield.slot")},...D},{id:"range-calendar",component:()=>i.e("RangeCalendarWidget").then(i.bind(null,"79f3")),props:{placeHolder:T("siqcw.inputfield.slot")},...D},{id:"select",component:()=>i.e("OptionsWidget").then(i.bind(null,"1678")),props:k,layoutProps:{wrapperClass:"single-select widget-card",titleClass:"widget-card-title"}},{id:"multiple-select",component:()=>i.e("MultiOptionsWidget").then(i.bind(null,"c53c")),props:{placeHolder:T("siqcw.inputfield.multiselect")},layoutProps:{wrapperClass:"multi-select widget-card",titleClass:"widget-card-title"}},{id:"file",component:()=>i.e("FileUploadWidget").then(i.bind(null,"d60e")),props:{},...D},{id:"star-rating",component:()=>i.e("RatingsWidget").then(i.bind(null,"21c0")),props:{placeHolder:T("siqcw.inputfield.rating")},...D},{id:"happiness-rating",component:()=>i.e("RatingsWidget").then(i.bind(null,"21c0")),props:{placeHolder:T("siqcw.inputfield.rating")},...D},{id:"like",component:()=>i.e("RatingsWidget").then(i.bind(null,"21c0")),props:{placeHolder:T("siqcw.inputfield.rating")},...D},{id:"location",component:()=>i.e("LocationWidget").then(i.bind(null,"837f")),props:{placeHolder:T("siqcw.inputfield.location")},...D},{id:"drop-down",component:()=>i.e("DropDownWidget").then(i.bind(null,"3c16")),props:k,layoutProps:{wrapperClass:"drpdwn-widget widget-card",titleClass:"widget-card-title"}},{id:"timeslots",component:()=>Promise.all([i.e("BookingsDialog~CalendarDialog~CalendarWidget~DateTimeSlotsWidget~TimeSlotsWidget~ZohoBookingsWidget"),i.e("DateTimeSlotsWidget~TimeSlotsWidget"),i.e("TimeSlotsWidget")]).then(i.bind(null,"65f1")),props:{placeHolder:T("siqcw.inputfield.slot")},...D},{id:"date-timeslots",component:()=>Promise.all([i.e("BookingsDialog~CalendarDialog~CalendarWidget~DateTimeSlotsWidget~TimeSlotsWidget~ZohoBookingsWidget"),i.e("DateTimeSlotsWidget~TimeSlotsWidget"),i.e("DateTimeSlotsWidget")]).then(i.bind(null,"e742")),props:{placeHolder:T("siqcw.inputfield.slot")},...D},{id:"slider",component:()=>i.e("SliderWidget").then(i.bind(null,"1d25")),props:{placeHolder:T("siqcw.inputfield.slider")},...D},{id:"range-slider",component:()=>i.e("RangeSliderWidget").then(i.bind(null,"c04e")),props:{placeHolder:T("siqcw.inputfield.rangeslider")},...D},{id:"multiple-product",component:()=>i.e("MultipleProduct").then(i.bind(null,"6632")),props:{},...D}],x={placeHolder:"siqcw.inputfield.placeholder"},H=[{id:"name",component:_,props:{errMsg:T("value.err"),...x},...S},{id:"email",component:_,props:{errMsg:T("mail.err"),...x},...S},{id:"tel",component:()=>i.e("TelephoneWidget").then(i.bind(null,"ea96")),props:{errMsg:T("phone.err"),...x},...S},{id:"password",component:()=>i.e("PasswordWidget").then(i.bind(null,"66ad")),props:{errMsg:T("pwd.err"),...x},...S},{id:"number",component:_,props:{errMsg:T("num.err"),...x},...S},{id:"url",component:_,props:{errMsg:T("url.err"),...x},...S},{id:"company",component:(r.b?r.e._SKIPPABLE_IN_COMPANY_CARD:Object(w.A)().dynamicConf.isCompanyInputEnhancement)?_:()=>i.e("CompanyNameWidget").then(i.bind(null,"925c")),props:x,...S},...W],I=[{id:"articles",component:()=>i.e("ArticlesWidget").then(i.bind(null,"eb2b")),props:{},layoutProps:{wrapperClass:"article-widget"}},{id:"links",component:()=>i.e("LinksWidget").then(i.bind(null,"4db1")),...D},{id:"video",component:()=>i.e("VideoWidget").then(i.bind(null,"677d")),props:{},layoutProps:{wrapperClass:"video-widget"}},{id:"single-product",component:()=>i.e("SingleProductWidget").then(i.bind(null,"e3f6")),props:{},layoutProps:{wrapperClass:"single-product widget-card",titleClass:"widget-card-title"}},{id:"multiple-product",component:()=>i.e("MultipleProduct").then(i.bind(null,"6632")),props:{},layoutProps:{wrapperClass:"multi-product widget-card",titleClass:"widget-card-title"}}],B=[{id:"booking_input_card",component:()=>Promise.all([i.e("BookingsDialog~CalendarDialog~CalendarWidget~DateTimeSlotsWidget~TimeSlotsWidget~ZohoBookingsWidget"),i.e("ZohoBookingsWidget")]).then(i.bind(null,"bf87")),props:{component:()=>i.e("StaffPic").then(i.bind(null,"5f16")),compProps:{}},layoutProps:{wrapperClass:"widget-card bookings-widget",titleClass:"widget-card-title fw600 integ-card-title"}}],O=[{id:"payment_card",component:()=>i.e("PaymentsWidget").then(i.bind(null,"caa4")),props:{},layoutProps:{hasSubmitBtn:!1,wrapperClass:"widget-card payment-card",titleClass:"widget-card-title fw600 integ-card-title",descClass:"line-clamp-3 pLR14 mB15"}}],M={mixins:[y.a],props:{detail:{type:Object,require:!0}},data:()=>({activeCompProps:{},activeComp:void 0,layoutProps:{},imageProps:{},isDisplayCard:!1}),created(){this.init()},mounted(){var e;this.$parent.$data.wrapperClass=(null===(e=this.layoutProps)||void 0===e?void 0:e.wrapperClass)||"",this.$delete(this.layoutProps,"wrapperClass")},methods:{init(){this.getProps().then((e=>{if(e.excludeTitle){var t;let i=e.title;delete e.excludeTitle,delete e.title,i&&(e[i]=(null===(t=this.detail)||void 0===t||null===(t=t.message)||void 0===t?void 0:t.text)||""),this.activeCompProps={title:"",props:e}}else{var i;this.activeCompProps={title:(null===(i=this.detail)||void 0===i||null===(i=i.message)||void 0===i?void 0:i.text)||"",props:e}}}))},getProps(){return new Promise(((e,t)=>{let i={input_card:H,display_card:I,booking_input_card:B,payment_card:O},s={},o=this;Object.keys(i).forEach((t=>{var a;let n=b()(this.detail.meta),l=n[t]||{};if(C.a.includes(n.type)&&(l=b()(n),"payment_card"==n.type)){let e=n.url;l.paymentUrl=e,delete n.url}if(null!=n&&null!==(a=n.display_card)&&void 0!==a&&a.image){var r;let e=n.display_card,t=e.image||"";o.imageProps={imgUrl:t,type:t.split("&type=")[1],dataSrc:e.blurimg},this.activeCompProps={title:(null===(r=this.detail)||void 0===r||null===(r=r.message)||void 0===r?void 0:r.text)||""}}l&&i[t].forEach((i=>{var a;if(i.id==l.type||n.hasOwnProperty(i.id)){switch(o.activeComp=i.component,t){case"input_card":this.getInputProps(Object.keys(l).length?l:{type:i.id,...n},i).then((t=>{s=t,s.error=s.error||i.props.errMsg,e({...s,...i.props||{}})}));break;case"display_card":s=this.getDisplayProps(l),this.isDisplayCard=!0,e({...s,...i.props||{}});break;case"booking_input_card":this.getBookingProps(l).then((t=>{s=t,i.props.compProps=Object.assign({},i.props.compProps,{staffIds:n.staff_ids||[]}),e({...s,...i.props||{}})}));break;case"payment_card":s={config:l,desc:l.formatted_amount,paymentDetails:this.detail.payment_card||{},subDesc:(null===(a=this.detail)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.paymentpage_description)||""},e({...s,...i.props||{}})}i.layoutProps&&(o.layoutProps=b()(i.layoutProps))}}))}))}))},getInputProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(((t,i)=>{var s;let{type:o="",error:a=[],placeholder:n="",value:l="",country_code:r="",imgUrl:d="",max_length:c="",min_length:p=""}=e,u=()=>({level:e.level,setConversationRating:e.set_conversation_rating,ratingType:o});switch(o){case"star-rating":case"happiness-rating":case"like":return void t(u());case"calendar":return void t({title:e.label,btnTxt:e.select_label,showTime:e.time,showTimeZone:e.tz,days:e.days,timeFormat:e.time_format});case"range-calendar":return void t({title:e.label,btnTxt:e.select_label,showTime:e.time,showTimeZone:e.tz,timeFormat:e.time_format});case"select":return void t({options:this.formattedTagOptions(e.options)});case"multiple-select":return void t({options:this.formattedTagOptions(e.options),min:e.min_selection,max:e.max_selection});case"file":return void t({allowedFormats:e.allowed_formats,max:e.max,min:e.min});case"suggestions":return void t({suggestions:this.formattedTagOptions(e.suggestions)});case"location":return void t({title:e.label,btnText:e.select_label,radius:parseInt(e.radius),latitude:parseFloat(e.lat),longitude:parseFloat(e.lng),isNewApi:(null===(s=this.embedDetail.dynamicConf)||void 0===s?void 0:s.isZohoV3Enabled)||!1});case"drop-down":return void t({label:e.select_label,placeHolder:e.placeholder,options:e.options,isMultiSelect:e.multiple,min:e.min_selection,max:e.max_selection});case"timeslots":return void t({slots:e.slots,hasTimeZone:e.tz,defaultTimeZone:e.time_zone_id});case"date-timeslots":return void t({slots:this.getFormattedSlots(e.slots),hasTimeZone:e.tz,defaultTimeZone:e.time_zone_id});case"slider":return void t({paths:e.values,defaultValue:e.default_value,fromHint:e.from_hint,toHint:e.to_hint});case"range-slider":return void t({paths:e.values});case"multiple-product":return void t({list:e.elements});default:return void t({inputType:o,error:a[0]||"",placeholder:n,value:l,ccode:r||"+1",maxLen:c.toString(),minLen:p.toString()})}}))},getDisplayProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t=""}=e;switch(t){case"articles":return{articles:e.articles||[],subDesc:e.description,excludeTitle:!0,title:"preTitle"};case"video":return{url:e.url,autoPlay:e.autoplay,linkInfo:e.link_info,excludeTitle:!0,title:"subTitle"};case"links":return{links:e.links};case"single-product":return{list:e.elements.filter((e=>e.id)),title:e.title,subTitle:e.subtitle,actions:e.actions};case"multiple-product":return{list:e.elements};default:return{}}},getBookingProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(((t,i)=>{P().then((i=>{let s=this.$store.state.conversationstore.activeChatId,o=[this.bookingIntegDetails&&this.bookingIntegDetails.enabled?Promise.resolve(this.bookingIntegDetails):i.default.getBookingIntegDetails(),this.services.length?Promise.resolve(this.services):i.default.getServices(s),this.staffs.length?Promise.resolve(this.staffs):i.default.getStaffs(s)];Promise.all(o).then((i=>{var s,o;let[a,n=[],l=[]]=i,{staff_ids:r,service_ids:d}=e,c=d&&d.length,p=!a.enabled||n.error;p&&(n=[]),[{val:a,subKey:"integDetails"},{val:n,subKey:"services"},{val:l,subKey:"staffs"}].forEach((e=>{let{val:t,subKey:i}=e,s=this[i];!(Array.isArray(s)?s.length:s)&&this.$store.commit("embedstore/updateState",{key:"bookings",res:t,subKey:i})}));let u=n.filter((e=>e.id==((null==d?void 0:d[0])||(null==r?void 0:r[0])))),{price:m,currency:g}=u[0]||{},h=m?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(isNaN(parseInt(e)))return e;let[i,s]=e<1e3?[1,""]:e<1e6?[1e3,"K"]:[1e6,"M"];return((e,i)=>Math.floor(e/i*Math.pow(10,t))/Math.pow(10,t))(e,i)+s}(m)+(e=>({usd:"$",inr:"₹"}[e.toLowerCase()]||""))(g||""):"",f=p||c&&!u.length;t({serviceIds:d,staffIds:r,integDetails:a,services:n,customTitle:(null===(s=u[0])||void 0===s?void 0:s.name)||"",title:f?"":((null===(o=this.detail)||void 0===o||null===(o=o.message)||void 0===o?void 0:o.text)||"").split("-")[0],desc:d?h:"",msgId:this.detail.id,price:h,excludeTitle:f})}))}))}))}},computed:{...Object(f.c)("embedstore",["embedDetail"]),...Object(f.b)({services:"embedstore/services",staffs:"embedstore/staffs",bookingIntegDetails:"embedstore/bookingIntegDetails"})},watch:{detail:{deep:!0,handler:"init"}}};var q={name:"BotWidget",inheritAttrs:!1,mixins:[M],props:{onSubmit:{type:Function,default:()=>{}},isActive:{type:Boolean,required:!0}},data:()=>({asyncProps:{}}),provide(){var e=this;return{getMsgDetail:()=>this.detail,updateDynProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.asyncProps=t},afterMounted:this.scrollToNewMsg}},inject:{scrollToNewMsg:{default:()=>()=>{}},updateComposerDetail:{default:()=>()=>{}}},methods:{updateComposer(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{placeHolder:i=""}=(null===(e=this.activeCompProps)||void 0===e?void 0:e.props)||{};!t&&this.isActive?i&&this.updateComposerDetail({placeHolder:i}):this.updateComposerDetail()},onEnterHandler(e){this.onSubmitHandler()},onSubmitHandler(){var e,t;null===(e=this.$refs.async_comp.$refs.dyn_comp)||void 0===e||null===(t=e.validateComponent)||void 0===t||t.call(e).then((e=>{this.onSubmit(e)})).catch((e=>{}))}},computed:{activeProps(){var e;return(null===(e=this.activeCompProps)||void 0===e?void 0:e.props)||{}},title(){var e;return this.customTitle||(null===(e=this.activeCompProps)||void 0===e?void 0:e.title)||""},customTitle(){return this.activeProps.customTitle||""},desc(){return this.activeProps.desc||""},subDesc(){return this.activeProps.subDesc||""},isExclusiveWidget(){return C.a.includes(this.detail.meta.type)}},watch:{activeProps:{immediate:!0,deep:!0,handler(){this.updateComposer()}},isActive(){this.updateComposer(!0)}},components:{AsyncComponent:s.default,WidgetLayout:g}},j=q,A=(i("d48c"),i("0358"),Object(u.a)(j,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("widget-layout",e._b({attrs:{title:e.title,preTitle:e.activeProps.preTitle||"",desc:e.desc,subDesc:e.subDesc,onSubmitHandler:e.onSubmitHandler,imageProps:e.imageProps,comp:e.activeProps.component,compProps:e.activeProps.compProps,isActive:e.isActive||e.isExclusiveWidget,widget:""},scopedSlots:e._u([{key:"component",fn:function(){return[e.isActive||e.isDisplayCard||e.isExclusiveWidget?i("async-component",{ref:"async_comp",attrs:{comp:e.activeComp,compProps:Object.assign({},{title:e.activeCompProps.title},e.activeCompProps.props,{onSubmitHandler:e.onEnterHandler,detail:e.detail}),className:"bot-loader"}}):e._e(),e.asyncProps.comp?i("async-component",e._b({},"async-component",e.asyncProps,!1)):e._e(),e._t("post-slot")]},proxy:!0}],null,!0)},"widget-layout",e.layoutProps,!1))}),[],!1,null,"69d6cb3d",null));t.default=A.exports},b76c:function(e,t,i){"use strict";i.r(t);var s={name:"BotActions",props:{hasRollback:Boolean,hasRestart:Boolean,onSelect:Function},data:()=>({actions:[]}),beforeMount(){this.init()},methods:{init(){let{actions:e,$doI18N:t}=this;this.hasRollback&&e.push({title:t("bot.rollbackflow"),iconClass:"siqico-sync clr9",id:"rollback"}),this.hasRestart&&e.push({title:t("bot.restartflow"),iconClass:"siqico-retry clr9",id:"restart"})}}},o=s,a=(i("2ee0"),i("2877")),n=Object(a.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"w100 flexM font12 mB5 mT5"},e._l(e.actions,(function(t){return i("div",{directives:[{name:"a11y",rawName:"v-a11y:box",arg:"box"},{name:"aria",rawName:"v-aria:button",value:{label:t.title},expression:"{label: action.title}",arg:"button"}],key:t.id,staticClass:"curP mR10 clr3 bot-action posrel",attrs:{"data-zsqa":t.id},on:{click:function(i){return e.onSelect(t)}}},[i("Icon",{class:t.iconClass+" mR5"}),i("span",{staticClass:"theme-blue-clr"},[e._v(e._s(t.title))])],1)})),0)}),[],!1,null,"40ed4c60",null);t.default=n.exports},d48c:function(e,t,i){"use strict";i("7404")},f365:function(e,t,i){"use strict";i("0ebf")},f9d6:function(e,t,i){}}]);