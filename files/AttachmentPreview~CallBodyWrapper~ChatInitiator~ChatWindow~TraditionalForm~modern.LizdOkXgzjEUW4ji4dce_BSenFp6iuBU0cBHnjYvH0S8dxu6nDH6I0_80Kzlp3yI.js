(window.siqcwJsonp=window.siqcwJsonp||[]).push([["AttachmentPreview~CallBodyWrapper~ChatInitiator~ChatWindow~TraditionalForm"],{1549:function(e,t,i){"use strict";var s=i("ef71"),o=i("c1f3"),a=i("2900"),n=i("4d7e"),l=i("05a0"),r={name:"TextArea",mixins:[n.a,a.a],props:{hasEmoji:{type:Boolean,default:!1},hasDynamicHeight:{type:Boolean,default:!1},showCount:{type:Boolean,default:!1},id:{type:String,default:""}},watch:{input:{immediate:!0,handler:"updateHeight"}},mounted(){this.setTextAreaComputed()},methods:{updateHeight(){this.hasDynamicHeight&&this.$nextTick((()=>{let{input:e}=this.$refs,t=l.a.isEmbedFeatureConfEnabled("widgetEnhancement");if(!e)return;let i=s.c?52:100,o=i+70;e.style.height=t?"auto":"";let a=e.scrollHeight;a=a<i?i:a;let n=a>o,{paddingTop:r,paddingBottom:c}=this.textAreaComputedStyle||{};e.style.height=(n?o:t?a-(r+c):a)+"px",e.style.overflow=n?"auto":"hidden"}))},setTextAreaComputed(){let e=window.getComputedStyle(this.$refs.input)||{};this.textAreaComputedStyle={paddingTop:parseFloat(e.paddingTop),paddingBottom:parseFloat(e.paddingBottom)}}},components:{UnicodeEmojis:o.a}},c=r,h=(i("ffd8"),i("2877")),d=Object(h.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"siqcw-textarea-cont posrel clr3 flex fdirection",class:{sel:e.isFocused,"disbl-btn":e.disabled,"siqcw-error":e.error.show},attrs:{role:e.error.show?"alert":""}},[e._t("pre-main-slot"),i("div",{staticClass:"scroll-txtarea wh100 flex fdirection"},[i("textarea",e._g({directives:[{name:"model",rawName:"v-model.trim",value:e.input,expression:"input",modifiers:{trim:!0}},{name:"aria",rawName:"v-aria",value:{label:e.placeHolder||""},expression:"{label: placeHolder || ''}"}],ref:"input",staticClass:"wh100 siqcw-textarea",attrs:{id:e.id,placeholder:e.placeHolder,disabled:e.disabled,maxlength:e.maxLength,"data-zsqa":"text_area"},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}},e.listeners)),e.showCount?i("label",{staticClass:"show textR mR10",class:{clrR:e.input.length===e.maxLength},attrs:{for:"siqtextarea","data-zsqa":"count_section"}},[e._v(" "+e._s(e.input.length)+"/"+e._s(e.maxLength)+" ")]):e._e()]),e.hasEmoji||e.$scopedSlots.icons?i("div",{staticClass:"flexC justifyE clr9 mB10 mR10 footer-icons"},[e._t("pre-slot"),e.hasEmoji?i("Icon",{staticClass:"siqico-smile ifont20",attrs:{clickHandler:function(){return e.toggleEmoji(!0)},a11yArg:"box",ariaValue:{label:"siq.smiley",expanded:e.showEmoji,role:"listbox"},title:"siq.addemoji","data-zsqa":"smiley_button"},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.showEmoji=!1}}}):e._e(),e._t("icons")],2):e._e(),e.showEmoji?i("UnicodeEmojis",{attrs:{onSelect:e.handleEmojiSelection,searchValue:e.emojiSearchValue,hasSearch:!e.isEmojiSearch,onClose:e.toggleEmoji,placeHolder:"siq.search",noresultContent:"siq.notfound",searchIconClass:"siqico-search"}}):e._e(),e._t("footer")],2)}),[],!1,null,null,null);t.a=d.exports},2900:function(e,t,i){"use strict";let s=(e,t)=>{for(;t>=0&&(":"!==e[t]||" "!==e[t-1]&&0!==t);t--);return t};var o=i("cd91");t.a={data:()=>({showEmoji:!1,caretPosition:0,emojiSearchValue:""}),methods:{toggleEmoji(){this.showEmoji=!this.showEmoji,this.isEmojiSearch=!1},handleEmojiSelection(e){e=o.a.getEmoji(e);let{input:t,isEmojiSearch:i}=this,{input:a}=this.$refs,{selectionStart:n}=a,l=a.getAttribute("maxlength"),r=0;i&&(r=s(a.value,n-1));let c=t.substr(0,i?s(a.value,n-1):n)+(i?"":" ")+e+" "+t.substr(n);(!l||l&&c.length<=l)&&(this.input=c),this.setFocus(),this.$nextTick((()=>{let t=(i?r-1:n)+e.length+2;a.setSelectionRange(t,t)})),this.handleInput(),this.toggleEmoji()},handleEmojiShortcut(){let{input:e}=this.$refs;if(!e)return;let t=(e=>{let{selectionStart:t,selectionEnd:i}=e,o=e.value,a=s(o,t);if(-1!==a&&t&&t===i){let e=o.substring(a+1,t);return!e.includes(":")&&!e.includes(" ")&&{show:!0,value:e}}return{show:!1,value:""}})(e);this.emojiSearchValue=t.value,this.showEmoji=t.show,this.isEmojiSearch=t.show}}}},5461:function(e,t,i){"use strict";i("8c14a")},5552:function(e,t,i){},"8c14a":function(e,t,i){},c1f3:function(e,t,i){"use strict";var s=i("a8bd"),o=i("cd91"),a=i("e045"),n={name:"Pagination",props:{listData:{type:Array,default:()=>{}},limit:{type:Number,default:25},scrollEndHandler:{type:Function,default:()=>{}},resetCount:{type:Boolean,default:!0},isMultiSelect:{type:Boolean,default:!0},retainScrollPos:{type:Boolean,default:!1}},data:()=>({paginatedList:[],count:0,scrollPos:void 0,observer:void 0}),created(){this.sliceData()},mounted(){this.isMultiSelect&&(this.observer=new MutationObserver(this.moveTo),this.observer.observe(this.$el,{childList:!0,subtree:!0}))},beforeDestroy(){this.isMultiSelect&&this.observer.disconnect()},methods:{moveTo(){this.scrollPos<=this.$el.scrollHeight&&this.$el.scrollTo(0,this.scrollPos)},sliceData(){return new Promise(((e,t)=>{let i=this.totalCount,s=this;s.count<=i?(s.count+s.limit<=i?s.count+=s.limit:s.count=i,this.paginatedList=this.listData.slice(0,s.count)):this.paginatedList=this.listData,e()}))},onScrollEnd(){this.count>=this.totalCount&&this.scrollEndHandler(),this.sliceData()},setScrollPos(e){let{target:t}=e;this.scrollPos=t.scrollTop},gotoScrollPos(e){let t=this.$el;if(t)return t.scrollHeight<e&&this.isMultiSelect?(this.onScrollEnd(),this.$nextTick((()=>this.gotoScrollPos(e)))):void t.scrollTo(0,e)}},computed:{totalCount(){var e;return(null===(e=this.listData)||void 0===e?void 0:e.length)||0}},watch:{listData:{deep:!0,handler(){this.sliceData().then((()=>{this.$nextTick((()=>{!this.retainScrollPos&&this.setScrollPos({target:this.$el})&&this.gotoScrollPos(this.scrollPos)}))}))}}}},l=n,r=i("2877"),c=Object(r.a)(l,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"scroll-end",rawName:"v-scroll-end:200",value:e.onScrollEnd,expression:"onScrollEnd",arg:"200"}],on:{scroll:e.setScrollPos}},[e._t("default",null,{paginatedList:e.paginatedList})],2)}),[],!1,null,null,null),h=c.exports,d={name:"UnicodeEmojis",mixins:[i("844e").a],props:{onSelect:{type:Function,required:!0},searchValue:{type:String,default:""},onClose:{type:Function,default:()=>{}},hasSearch:{type:Boolean,default:!1},placeHolder:{type:String,default:"common.search"},noresultContent:{type:String,default:"common.noresult"},searchIconClass:{type:String,default:"fsiq-search"},pos:{type:String,default:"btm-view"}},data(){return{emojiList:[],activeIndex:1,searchKey:this.searchValue,sectionIndexes:[],filteredEmojiList:[]}},created(){this.setEmojiList(),this.setSectionIndexes()},mounted(){this.hasSearch&&this.$refs.emojiSearchTextBox.focus()},methods:{setEmojiList(){let e=[];this.setRecentEmojisList();let t=this.getRecentEmojis();e.push({section:"common.recent"}),t.forEach((t=>{t[0]&&e.push([t[0],o.a.getTitle(t[0]),t[1]])}));for(let t in s.c){let i=s.c[t];e.push({section:t});for(let t in i)e.push([t,o.a.getTitle(t),i[t]])}this.emojiList=e,this.filteredEmojiList.length||(this.filteredEmojiList=e)},constructFilteredList(){let e=this.searchKey.trim().toLowerCase();if(!e)return this.filteredEmojiList=this.emojiList,void(this.activeIndex=1);if(this.activeIndex=0,this.hasSearch){let t=[],i=this.emojiList.filter((i=>{if(!this.isTitleSection(i)&&!t.includes(i[0]))return t.push(i[0]),i[1].toLowerCase().includes(e)}));return void(this.filteredEmojiList=i)}let t=[],i="startsWith",o="includes",a=function(i,s,o){let a=i[2];if(-1===t.indexOf(a)&&o.toLowerCase()[s](e))return t.push(a),i},n={startsWith:[],includes:[]},l={startsWith:[],includes:[]},r=[...s.b,...this.emojiList],c=s.b.length;r.forEach(((e,t)=>{if(!this.isTitleSection(e))if(t<c){var s=e[0];s.startsWith(":")&&(s=s.substr(1)),a(e,i,s)?n.startsWith.push(e):a(e,o,s)&&n.includes.push(e)}else a(e,i,e[1])?l.startsWith.push(e):a(e,o,e[1])&&l.includes.push(e)}));let h=[...n.startsWith,...l.startsWith,...l.includes,...n.includes];this.filteredEmojiList=h,h.length||this.onClose()},setDimensions(){var e;let t=(()=>{let e=this.$refs.scrollCont.$el,t=getComputedStyle(e);return e.offsetWidth-parseFloat(t.paddingLeft+t.paddingRight)})(),i=this.getHorizontalDimension(null===(e=this.$refs.emojiList)||void 0===e?void 0:e[0]);this.emojisPerRow=parseInt(t/i)},getHorizontalDimension(e){if(!e)return;let t=window.getComputedStyle(e);return e.offsetWidth+["marginLeft","marginRight"].reduce(((e,i)=>e+parseFloat(t[i])),0)},moveEmojiSelection(e){this.emojisPerRow||this.setDimensions();let t=e.key.toLowerCase();switch(t){case"arrowup":case"arrowdown":return this.adjustActiveIndex(this.emojisPerRow,"arrowdown"===t);case"arrowleft":case"arrowright":return this.adjustActiveIndex(1,"arrowright"===t);case"tab":this.activeIndex=-2;break;case"enter":return e.preventDefault(),this.onSelectHandler(this.filteredEmojiList[this.activeIndex])}},adjustActiveIndex(e,t){let i=this.activeIndex+(t?e:-e),{length:s}=this.filteredEmojiList,o=this.sectionIndexes.includes(i);t?o?i++:this.sectionIndexes.forEach(((e,t)=>{if(e<i&&e>this.activeIndex){let s=this.sectionIndexes[t-1],o=this.activeIndex-s,a=e+o%this.emojisPerRow;i=this.hasLastRowItem(o,e-s)?e-1:a}})):o&&i?i--:this.sectionIndexes.forEach(((e,t)=>{if(this.activeIndex>e&&i<e){let e=this.getPreviousIndex();i=e-1}})),!this.filteredEmojiList[0].section&&i<1?this.activeIndex=0:this.activeIndex=i<1?1:i>=s?s-1:i,this.scrollSelectionToView(t)},getPreviousIndex(){let e=0;return this.sectionIndexes.forEach((t=>{t<this.activeIndex&&(e=t)})),e},hasLastRowItem(e,t){for(let i=e;i<t;i++)if(!(i%this.emojisPerRow))return!0;return!1},scrollSelectionToView(e){this.$nextTick().then((()=>{let{$refs:t,activeIndex:i}=this;this.scrollToView(t.emojiList[i],t.scrollCont.$el,e,i,this.emojiLength)}))},returnSelection(){return!(!this.hasSearch&&0===this.filteredEmojiList.length)},isTitleSection:e=>e.section,onSelectHandler(e){e[2]&&(o.a.handleRecentEmojis(e),this.onSelect(e[2],e))},setRecentEmojisList(){if(this.getRecentEmojis())return;localStorage.setItem("siq_recentEmojis",JSON.stringify([[":thumbsup:","&#x1F44D"],[":blush:","&#x1F60A"],[":peace:","&#x270C;&#xFE0F"],[":grinning:","&#x1F600"],[":raised_hands:","&#x1F64C"]]))},getRecentEmojis:()=>JSON.parse(localStorage.getItem("siq_recentEmojis")),setSectionIndexes(){let e=this.filteredEmojiList,t=[];e.forEach(((e,i)=>{e.section&&t.push(i)})),this.sectionIndexes=t}},watch:{searchValue:{immediate:!0,handler(e){this.searchKey=e}},searchKey:{immediate:!0,handler(){this.emojiList.length||this.setEmojiList(),this.constructFilteredList()}}},components:{UiTransitions:a.a,Pagination:h}},u=d,m=(i("5461"),Object(r.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.filteredEmojiList.length||e.hasSearch?i("ui-transitions",{attrs:{enterToClass:"slide-show",leaveToClass:"slide-hide"}},[i("div",{directives:[{name:"close",rawName:"v-close",value:e.onClose,expression:"onClose"}],staticClass:"emoji_wrapper flex fdirection ovrflw-hid",class:e.pos},[e.hasSearch?i("div",{staticClass:"siq-search-field-wrap"},[i("em",{staticClass:"clr6 ifont14",class:e.searchIconClass}),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.searchKey,expression:"searchKey",modifiers:{trim:!0}}],ref:"emojiSearchTextBox",staticClass:"siq-search-field",attrs:{type:"text",placeholder:e.$doI18N(e.placeHolder)},domProps:{value:e.searchKey},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:e.onClose()},input:function(t){t.target.composing||(e.searchKey=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]):e._e(),e.filteredEmojiList.length?i("Pagination",{ref:"scrollCont",staticClass:"h100 ovrflw-auto siqcw-emoji-cont",attrs:{listData:e.filteredEmojiList,limit:200},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.paginatedList;return[i("div",{directives:[{name:"key",rawName:"v-key.up.down.right.left.enter.tab",value:e.moveEmojiSelection,expression:"moveEmojiSelection",modifiers:{up:!0,down:!0,right:!0,left:!0,enter:!0,tab:!0}}],attrs:{"data-zsqa":"emoji_wrapper_section"}},[e._l(s,(function(t,s){return[t.section?i("div",{key:s,staticClass:"clrA ifont13 pL5 title-sec mTB5"},[e._v(" "+e._s(e._f("i18n")(t.section))+" ")]):i("div",{directives:[{name:"title",rawName:"v-title",value:t[1],expression:"emoji[1]"}],key:s,ref:"emojiList",refInFor:!0,staticClass:"curP iflexC siqsy-cont emoji",class:{sel:e.activeIndex===s},attrs:{tabindex:"0",role:"img","aria-label":t[1],"data-zsqa":t[0]},domProps:{innerHTML:e._s(t[2])},on:{click:function(i){return e.onSelectHandler(t)}}})]}))],2)]}}],null,!1,3911774710)}):e._e(),e.hasSearch&&0===e.filteredEmojiList.length?i("div",{staticClass:"no-srch-emoji flexM fdirection h100"},[i("em",{class:e.searchIconClass}),i("p",{staticClass:"mT10 font20"},[e._v(e._s(e._f("i18n")(e.noresultContent)))])]):e._e()],1)]):e._e()}),[],!1,null,"cb5ef29e",null));t.a=m.exports},ffd8:function(e,t,i){"use strict";i("5552")}}]);