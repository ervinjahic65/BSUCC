(window.siqcwJsonp=window.siqcwJsonp||[]).push([["Trigger","chunk-74c25524"],{"09b0":function(t,e,i){"use strict";i.d(e,"c",(function(){return o})),i.d(e,"b",(function(){return r}));var n=i("2b0e"),a=i("8db4");let o=function(t,e){this.removeBotTyping();n.a.set(this,"typingId",Date.now()+"1"),t&&(this.typingTimeout=setTimeout((()=>{this.removeBotTyping(),null==e||e()}),t))},r=function(){clearTimeout(this.typingTimeout),n.a.delete(this,"typingId"),delete this.typingTimeout};e.a={beforeMount(){this.initTypingWatchers()},provide(){return{isBotTypingShown:()=>this.chatDetail.typingId}},watch:{isBotChat(t,e){!e&&t&&this.initTypingWatchers()}},methods:{initTypingWatchers(){if(!this.isBotChat||this.isClosedChat)return void r.call(this.chatDetail);let t="handleBotTyping";this.$eventBus.$on(t,(t=>{t.chatId===this.chatId&&this.handleBotTyping(t.typing)})),this.$once("hook:beforeDestroy",(()=>{this.$eventBus.$off(t)})),Object(a.g)(this.chatStatus)&&!this.chatDetail.isBotTrigger&&this.handleBotTyping(!0)},handleBotTyping(t){let{chatDetail:e}=this;if(e.updateTypingTimer||(e.updateTypingTimer=o,e.removeBotTyping=r),!this.isBotChat||!t||e.forwardTime)return e.removeBotTyping();e.updateTypingTimer(),this.scrollToBottom(!0)}}}},"561f":function(t,e,i){"use strict";i.d(e,"c",(function(){return c})),i.d(e,"b",(function(){return l}));var n=i("2b0e"),a=i("b5f5");let o=function(t){var e;t+="...",a.b?a.e&&(null===(e=a.e.setBotWaitingInfo)||void 0===e||e.call(a.e,t)):n.a.set(this,"botWaitingInfo",t)},r=function(t){let e=t.info.length,i=t.time/e;this.waitingTimeout=setTimeout(function(){if(t.infoid===e)return this.removeBotWaitingCard(),void(this.botWaitingResolver&&this.botWaitingResolver());o.call(this,t.info[t.infoid]),t.infoid++,r.call(this,t)}.bind(this),i)},s=function(t){let{time:e}=t;e&&(o.call(this,t.info[Math.floor(Math.random()*t.info.length)]),this.waitingTimeout=setTimeout((()=>{this.removeBotWaitingCard(),this.botWaitingResolver&&this.botWaitingResolver()}),e))},d=function(t){t.infoid=0,o.call(this,t.info[t.infoid]),t.infoid++,r.call(this,t)},c=function(t){this.removeBotWaitingCard(),this.removeBotTyping(),"random"===t.info_type?s.call(this,t):d.call(this,t)},l=function(){var t;clearTimeout(this.waitingTimeout),a.b?a.e&&(null===(t=a.e.setBotWaitingInfo)||void 0===t||t.call(a.e)):n.a.delete(this,"botWaitingInfo"),delete this.waitingTimeout};e.a={beforeMount(){this.initWaitingWatchers()},watch:{isBotChat(t,e){!e&&t&&this.initWaitingWatchers()}},methods:{handleBotWaitingCard(){let{chatDetail:t}=this;t.updateBotWaitingCard=c,t.removeBotWaitingCard=l},initWaitingWatchers(){if(!this.isBotChat||this.isClosedChat)return void l.call(this.chatDetail);let t="handleBotWaitingCard";this.$eventBus.$on(t,(t=>{t.chatId===this.chatId&&this.handleBotWaitingCard()})),this.$once("hook:beforeDestroy",(()=>{this.$eventBus.$off(t)}))}}}},a595:function(t,e,i){"use strict";i.d(e,"d",(function(){return o})),i.d(e,"h",(function(){return r})),i.d(e,"b",(function(){return s})),i.d(e,"g",(function(){return d})),i.d(e,"e",(function(){return c})),i.d(e,"f",(function(){return l})),i.d(e,"i",(function(){return u})),i.d(e,"j",(function(){return m})),i.d(e,"c",(function(){return g})),i.d(e,"a",(function(){return h}));var n=i("2b0e"),a=i("0970");n.a.prototype.$doI18N;const o={1:"classic",2:"general",3:"conversation"},r={4:"lloyd",8:"pattern",9:"pattern_straight",10:"pattern_curve"},s={0:"Default System Font",1:"Lato",2:"Opensans",3:"Oxygen",4:"Roboto",5:"Puvi"},d="Patricia",c={isVisitor:!1,name:"Patricia Boyle",text:""},l=[{isVisitor:!0,name:"Broderick",text:"I need invoice for my upgrade kit!"},{isVisitor:!1,name:"Patricia Boyle",text:"Thanks for connecting with us here at Zillium. Hey Broderick, great to hear from you again."},{isVisitor:!0,name:"Broderick",text:"Hey Patricia, I bought the upgrade kit for my zillibot."}],u={isVisitor:!0,name:"John Smith",text:"siq.hello"},m={isVisitor:!0,name:"John Smith",text:"chat.visreply"},g={[a.i.name]:"name.ques",[a.i.firstname]:"common.fnameques",[a.i.lastname]:"common.lnameques",[a.i.phone]:"phone.ques",[a.i.email]:"mail.ques",[a.i.dept]:"faq.dept",[a.i.campaign]:"siqcw.campaignlabel"},h={mtime:Date.now(),meta:{suggestions:["1","2"],skippable:!1,field_name:"department"},dname:"",msg:""}},c856:function(t,e,i){"use strict";i.r(e),i.d(e,"handleTrigger",(function(){return v})),i.d(e,"handleBotTrigger",(function(){return B})),i("ac6a");var n=i("2b0e"),a=i("4360"),o=i("fa7d"),r=i("b6be"),s=i("0970"),d=i("7763"),c=i("e00d"),l=i("05a0"),u=i("8db4"),m=i("09b0"),g=i("561f"),h=i("e6fd"),p=i("b5f5"),f=i("e352");let b=(t,e,i)=>{let n=Object(o.a)(),a=t.type===s.q.file?r.a.getTempAttachmentMessage({clientId:n,file:{name:t.fName,size:t.size,type:t.content,blur_image:t.blurimg},tempUrl:t.url,comment:t.comment}):r.a.getTempTextMessageObj(n,t,e);return a.sender={id:i.attender||i.id,name:i.name},a.new=!0,a},T=()=>{!h.p&&n.a.prototype.$playTune(h.G.message)},y=(t,e)=>{let i=Object(u.w)(),n=t.attenderdetails||{},r={id:n.attender||Object(o.a)(),name:t.sendername||n.name},h=t.message&&b(t.message,t.meta,r),p={id:i,isTrigger:!0,question:t.message,attenderId:n.attender||"",attenderName:r.name,attenderDesc:n.aboutme,attenderImg:n.imagefkey,status:s.f.temp,lastMessage:h,inTime:Date.now(),...e?{isBot:e,isBotTrigger:e,typingId:Date.now(),updateTypingTimer:m.c,removeBotTyping:m.b,updateBotWaitingCard:g.c,removeBotWaitingCard:g.b}:{}};return a.a.commit("conversationstore/appendTempChat",{chatDetail:p,messageDetail:h,client_message_id:i}),l.a.sendPostMessage("opencw"),e&&l.a.sendPostMessage("closetriggerloading"),Object(d.a)(c.b.ON_TRIGGER,t),i},v=t=>{$Support.isChatExist()||(y(t),T())};const B=async t=>{var e;if(p.c||$Support.isChatExist())return;let i={name:t.dname,attender:t.attender,aboutme:t.aboutme,imagefkey:t.attender_imagefkey},a=y({attenderdetails:i},!0);await n.a.prototype.$nextTick();let o=Object(u.u)(a),s=Date.now();for(let e of t.msglist)await(Object(u.d)(e)?Object(u.U)(o,e,s):Object(u.T)(o,e,s)),s=Date.now(),r.a.appendTempMessage(o.id,b(e.msg,e.meta,i)),h.p&&Object(f.setPlaceHolder)(!0),T();h.p&&(null===(e=p.e.afterMsgRendered)||void 0===e||e.call(p.e,t))}},e352:function(t,e,i){"use strict";i.r(e),i.d(e,"isCallForm",(function(){return g})),i.d(e,"createTempChat",(function(){return h})),i.d(e,"getTempChatId",(function(){return p})),i.d(e,"getMessageObj",(function(){return f})),i.d(e,"getMessageList",(function(){return b})),i.d(e,"setTranscriptList",(function(){return y})),i.d(e,"resetTranscript",(function(){return v})),i.d(e,"getInlineTranscript",(function(){return B})),i.d(e,"getConversationTranscript",(function(){return w})),i.d(e,"updateStore",(function(){return C})),i.d(e,"updateEmbedDetail",(function(){return D})),i.d(e,"updateHomePageDetail",(function(){return I})),i.d(e,"updateBookingsDialog",(function(){return W})),i.d(e,"setPlaceHolder",(function(){return O})),i.d(e,"updateMsgRendered",(function(){return j})),i.d(e,"getFormData",(function(){return $})),i.d(e,"updatePreviewDialogState",(function(){return k})),i("ac6a");var n=i("2b0e"),a=i("4360"),o=i("fa7d"),r=i("a595"),s=i("8db4"),d=i("9d56"),c=i("b5f5"),l=i("0970");const u=n.a.prototype,m=u.$doI18N;let g=()=>c.e.ISCALL_FORM,h=t=>{let e={id:t,status:l.f.waiting};a.a.commit("conversationstore/appendTempChat",{chatDetail:e,client_message_id:t})},p=()=>{let t=Object(s.n)();return t||(t=Object(o.a)(),h(t),t)},f=t=>{let e=Object(o.a)();return{id:e,type:"text",message:{text:m(t.text)},time:Date.now(),sender:{id:t.isVisitor?"$"+e:e,name:t.name||m("siq.operator")},meta:{},salutation:t.salutation}},b=t=>t.map((t=>f(t))),T=t=>{var e;let i=t.meta||{},n=i.input_card||{},a=n.type||i.field_name,o=m(r.c[a]);return{isVisitor:!1,name:null===(e=Object(s.E)())||void 0===e?void 0:e.dname,text:t.msg||o,...n.type===l.i.firstname?{salutation:n.salutation}:{}}},y=async(t,e,i)=>{v(e),await n.a.nextTick(),a.a.commit("conversationstore/setTranscriptList",{list:t,params:{from:"top"},chatId:e}),i&&Object(s.eb)(e,{status:i})},v=t=>{a.a.commit("conversationstore/resetTranscript",t)},B=()=>{let{dname:t,title:e}=Object(s.E)()||{},i={isVisitor:!1,name:t||m("siq.operator"),text:e||m("msg.inline.greet","")};return[r.i,i].map((t=>f(t)))},w=()=>{let t=[r.i],e=Object(s.E)().msglist;for(let i of e)t.push(T(i)),t.push(r.j);return t=t.map((t=>f(t))),t},C=(t,e,i)=>{a.a.commit(`${t}/${e}`,i)},D=t=>{a.a.commit("embedstore/updateEmbedDetail",t)},I=t=>{let e=Object(s.A)().homePageConfigs;e={...e,...t},D({homePageConfigs:e})},W=t=>{if(document.getElementById("bookings_preview"))return void window.updateIntegDetails(t.compProps.integDetails);const e=()=>Promise.resolve().then(i.bind(null,"392d")),n={template:'<AsyncComponent v-bind="props" ref="dyn_comp" />',name:"BookingPreviewWrapper",data:()=>({props:t}),render:i=>i(e,{props:t}),components:{AsyncComponent:e}};Object(d.b)(n,"siqcw-section-cont")},O=t=>{let e=c.e.document.getElementById("msgarea");t&&e&&(e.placeholder=m("siq.message.hitenter"),e.disabled=!1),u.$eventBus.$off("onPlaceHolderChange"),u.$eventBus.$on("onPlaceHolderChange",(t=>{let{placeholder:i,isComposerDisabled:n}=t;e&&(e.placeholder=m(i),e.disabled=n)}))},j=t=>{var e;null===c.e||void 0===c.e||null===(e=c.e.afterMsgRendered)||void 0===e||e.call(c.e,t)},$=t=>(t.getAll("file").forEach((e=>t.append("files",e))),t.delete("att_type"),t.delete("file"),t),k=t=>{if(c.b){let e=c.e.document.getElementById("botpreviewwindow");t?e.setAttribute("dialogopened",!0):e.removeAttribute("dialogopened")}}}}]);